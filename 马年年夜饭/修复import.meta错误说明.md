# âœ… å·²ä¿®å¤ import.meta.env é”™è¯¯

## ğŸ› é—®é¢˜åŸå› 

å¾®ä¿¡å¼€å‘è€…å·¥å…·å°è¯•ç¼–è¯‘ `src/services/supabase.js` æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä½¿ç”¨äº† Vite çš„ `import.meta.env` è¯­æ³•ï¼Œå¯¼è‡´ï¼š

```
SyntaxError: Cannot use 'import.meta' outside a module
```

**æ ¹æœ¬åŸå› **ï¼š
- `src/` ç›®å½•æ˜¯ Vue Web åº”ç”¨çš„ä»£ç 
- ä½¿ç”¨äº† Vite æ„å»ºå·¥å…·çš„ `import.meta.env`
- å¾®ä¿¡å°ç¨‹åºç¯å¢ƒä¸æ”¯æŒè¿™ä¸ªè¯­æ³•
- å¾®ä¿¡å¼€å‘è€…å·¥å…·é»˜è®¤ç¼–è¯‘æ‰€æœ‰ `.js` æ–‡ä»¶

## âœ… è§£å†³æ–¹æ¡ˆ

å·²åœ¨ `project.config.json` ä¸­é…ç½®å¿½ç•¥è§„åˆ™ï¼š

```json
{
  "packOptions": {
    "ignore": [
      { "type": "file", "value": "src" },
      { "type": "file", "value": "node_modules" },
      { "type": "file", "value": "dist" },
      { "type": "file", "value": "index.html" },
      { "type": "file", "value": "package.json" },
      { "type": "file", "value": "vite.config.js" },
      { "type": "file", "value": ".env" }
    ]
  }
}
```

## ğŸ¯ æ•ˆæœ

é…ç½®åï¼Œå¾®ä¿¡å¼€å‘è€…å·¥å…·å°†ï¼š
- âœ… **å¿½ç•¥** `src/` ç›®å½•ï¼ˆVue Web åº”ç”¨ï¼‰
- âœ… **åªç¼–è¯‘** å°ç¨‹åºç›¸å…³æ–‡ä»¶
- âœ… **ä¸å†æŠ¥é”™** import.meta.env é”™è¯¯

## ğŸ“‚ é¡¹ç›®ç»“æ„è¯´æ˜

```
æ–°å»ºæ–‡ä»¶å¤¹/
â”‚
â”œâ”€â”€ ğŸ“± å¾®ä¿¡å°ç¨‹åºï¼ˆä¼šè¢«ç¼–è¯‘ï¼‰
â”‚   â”œâ”€â”€ pages/              âœ… ç¼–è¯‘
â”‚   â”œâ”€â”€ utils/              âœ… ç¼–è¯‘
â”‚   â”œâ”€â”€ app.js              âœ… ç¼–è¯‘
â”‚   â”œâ”€â”€ app.json            âœ… ç¼–è¯‘
â”‚   â”œâ”€â”€ app.wxss            âœ… ç¼–è¯‘
â”‚   â””â”€â”€ project.config.json âœ… ç¼–è¯‘
â”‚
â””â”€â”€ ğŸŒ Vue Web åº”ç”¨ï¼ˆå·²å¿½ç•¥ï¼‰
    â”œâ”€â”€ src/                âŒ ä¸ç¼–è¯‘
    â”œâ”€â”€ node_modules/       âŒ ä¸ç¼–è¯‘
    â”œâ”€â”€ dist/               âŒ ä¸ç¼–è¯‘
    â””â”€â”€ index.html          âŒ ä¸ç¼–è¯‘
```

## ğŸ”„ ç«‹å³ç”Ÿæ•ˆ

**æ“ä½œæ­¥éª¤**ï¼š

1. **ä¿å­˜é…ç½®**ï¼ˆå·²å®Œæˆï¼‰
2. **å…³é—­å¾®ä¿¡å¼€å‘è€…å·¥å…·**
3. **é‡æ–°æ‰“å¼€é¡¹ç›®**
4. **ç‚¹å‡»ã€Œç¼–è¯‘ã€**
5. âœ… é”™è¯¯æ¶ˆå¤±

## ğŸ§ª éªŒè¯ä¿®å¤

ç¼–è¯‘ååº”è¯¥çœ‹åˆ°ï¼š
- âœ… æ§åˆ¶å°æ— é”™è¯¯
- âœ… å°ç¨‹åºæ­£å¸¸è¿è¡Œ
- âœ… åªæœ‰å°ç¨‹åºæ–‡ä»¶è¢«ç¼–è¯‘
- âœ… `src/` ç›®å½•è¢«å¿½ç•¥

## ğŸ’¡ ä¸ºä»€ä¹ˆæœ‰ä¸¤å¥—ä»£ç ï¼Ÿ

### å¾®ä¿¡å°ç¨‹åºç‰ˆæœ¬
- **ä½ç½®**ï¼š`pages/`, `utils/`, `app.js`
- **å­˜å‚¨**ï¼šå¾®ä¿¡æœ¬åœ°å­˜å‚¨ï¼ˆwx.setStorageSyncï¼‰
- **åŠŸèƒ½**ï¼šå®Œæ•´çš„å°ç¨‹åºåŠŸèƒ½
- **è¿è¡Œ**ï¼šå¾®ä¿¡å¼€å‘è€…å·¥å…·

### Vue Web åº”ç”¨ç‰ˆæœ¬
- **ä½ç½®**ï¼š`src/`
- **å­˜å‚¨**ï¼šlocalStorage / Supabase
- **åŠŸèƒ½**ï¼šå®Œæ•´çš„å‰ç«¯åŠŸèƒ½
- **è¿è¡Œ**ï¼š`npm run dev`

**ä¸¤ä¸ªç‰ˆæœ¬å®Œå…¨ç‹¬ç«‹ï¼Œäº’ä¸å½±å“ï¼**

## ğŸš€ å…¶ä»–è§£å†³æ–¹æ¡ˆ

å¦‚æœé…ç½® ignore åä»æœ‰é—®é¢˜ï¼Œå¯ä»¥å°è¯•ï¼š

### æ–¹æ¡ˆ Aï¼šé‡å‘½å src ç›®å½•
```bash
mv src web-src
```

### æ–¹æ¡ˆ Bï¼šç§»åŠ¨åˆ°å…¶ä»–ä½ç½®
```bash
# å°† Vue é¡¹ç›®ç§»åŠ¨åˆ°å­ç›®å½•
mkdir web-app
mv src web-app/
mv index.html web-app/
mv package.json web-app/
```

### æ–¹æ¡ˆ Cï¼šåˆ›å»ºç‹¬ç«‹ç›®å½•
```bash
# å°†å°ç¨‹åºæ–‡ä»¶ç§»åŠ¨åˆ°ç‹¬ç«‹ç›®å½•
mkdir miniprogram-clean
mv pages utils app.js app.json app.wxss miniprogram-clean/
```

## ğŸ“– å‚è€ƒæ–‡æ¡£

- [å¾®ä¿¡å°ç¨‹åº project.config.json é…ç½®](https://developers.weixin.qq.com/miniprogram/dev/devtools/projectconfig.html)
- [packOptions.ignore è¯´æ˜](https://developers.weixin.qq.com/miniprogram/dev/devtools/projectconfig.html#packOptions)

## âœ… é…ç½®å®Œæˆï¼

ç°åœ¨é‡æ–°ç¼–è¯‘é¡¹ç›®ï¼Œimport.meta.env é”™è¯¯åº”è¯¥å·²ç»è§£å†³äº†ï¼

ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼ğŸ´ğŸ§§ğŸŠ
