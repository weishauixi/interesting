<!--pages/gallery/gallery.wxml-->
<view class="gallery-page">
  <view class="container">
    <text class="title">ğŸ–¼ï¸ å¹´å¤œé¥­ç…§ç‰‡å¢™ ğŸ–¼ï¸</text>
    <text class="subtitle">ğŸŠ çœ‹çœ‹å¤§å®¶éƒ½åœ¨åƒä»€ä¹ˆ ğŸŠ</text>

    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <view class="stats-bar">
      <view class="stat-item">
        <text class="stat-value">{{photos.length}}</text>
        <text class="stat-label">å¼ ç…§ç‰‡</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-value">{{uniqueUploaders}}</text>
        <text class="stat-label">ä½æœ‹å‹å‚ä¸</text>
      </view>
    </view>

    <!-- å¿«é€Ÿä¸Šä¼ æŒ‰é’® -->
    <navigator url="/pages/upload/upload" open-type="switchTab" class="btn btn-primary btn-block">
      <text>ğŸ“¸ ä¸Šä¼ æˆ‘çš„å¹´å¤œé¥­</text>
    </navigator>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view wx:if="{{loading}}" class="loading">
      <text>åŠ è½½ä¸­...</text>
    </view>

    <!-- ç…§ç‰‡å¢™ -->
    <view wx:elif="{{photos.length > 0}}" class="gallery">
      <view
        wx:for="{{photos}}"
        wx:key="id"
        class="photo-card"
        bindtap="previewPhoto"
        data-photo="{{item}}"
      >
        <view class="photo-image">
          <image src="{{item.imageUrl}}" mode="aspectFill" class="photo-img"></image>
        </view>

        <view class="photo-info">
          <view class="photo-uploader">
            <view class="uploader-avatar">{{item.avatar}}</view>
            <text class="uploader-name">{{item.uploaderName}}</text>
          </view>

          <view wx:if="{{item.message}}" class="photo-message">
            {{item.message}}
          </view>

          <view class="photo-footer">
            <text class="photo-time">{{item.timeAgo}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:else class="empty-state">
      <text class="empty-icon">ğŸ“·</text>
      <text class="empty-text">è¿˜æ²¡æœ‰äººä¸Šä¼ å¹´å¤œé¥­ç…§ç‰‡</text>
      <text class="empty-hint">å¿«æ¥ä¸Šä¼ ç¬¬ä¸€å¼ å§ï¼</text>
      <navigator url="/pages/upload/upload" open-type="switchTab" class="btn btn-primary">
        ä¸Šä¼ å¹´å¤œé¥­
      </navigator>
    </view>
  </view>
</view>
