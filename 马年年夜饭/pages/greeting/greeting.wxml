<!--pages/greeting/greeting.wxml-->
<view class="greeting-page">
  <view class="container">
    <text class="title">ğŸ§§ å‘é€é©¬å¹´ç¥ç¦ ğŸ§§</text>
    <text class="subtitle">âœ¨ é€‰æ‹©ç²¾ç¾æ¨¡æ¿ï¼Œå®šåˆ¶ä¸“å±ç¥ç¦ âœ¨</text>

    <!-- æ¨¡æ¿é€‰æ‹© -->
    <view class="card">
      <text class="section-title">1ï¸âƒ£ é€‰æ‹©ç¥ç¦æ¨¡æ¿</text>

      <view class="templates-grid">
        <view
          wx:for="{{templates}}"
          wx:key="id"
          class="template-card {{selectedTemplate === item.id ? 'active' : ''}}"
          bindtap="selectTemplate"
          data-id="{{item.id}}"
        >
          <view class="template-preview" style="background: {{item.gradient}}">
            <text class="template-emoji">{{item.emoji}}</text>
          </view>
          <text class="template-name">{{item.name}}</text>
        </view>
      </view>
    </view>

    <!-- è¡¨å•å¡«å†™ -->
    <view class="card">
      <text class="section-title">2ï¸âƒ£ å¡«å†™ç¥ç¦ä¿¡æ¯</text>

      <view class="form-group">
        <text class="form-label">æ‚¨çš„æ˜µç§°</text>
        <input
          class="form-input"
          placeholder="è¯·è¾“å…¥æ‚¨çš„æ˜µç§°ï¼ˆå¯é€‰ï¼‰"
          value="{{form.senderName}}"
          bindinput="onSenderNameInput"
        />
      </view>

      <view class="form-group">
        <text class="form-label">ç¥ç¦å¯¹è±¡</text>
        <input
          class="form-input"
          placeholder="å¦‚ï¼šæ‰€æœ‰äººã€çˆ¸çˆ¸å¦ˆå¦ˆã€äº²çˆ±çš„æœ‹å‹ä»¬..."
          value="{{form.recipientName}}"
          bindinput="onRecipientNameInput"
        />
      </view>

      <view class="form-group">
        <text class="form-label">ç¥ç¦è¯­</text>
        <textarea
          class="form-textarea"
          placeholder="è¾“å…¥æ‚¨çš„ç¥ç¦è¯­..."
          value="{{form.message}}"
          bindinput="onMessageInput"
          maxlength="200"
        ></textarea>
      </view>

      <button class="btn btn-primary btn-block" bindtap="handleSubmit" disabled="{{submitting}}">
        <text wx:if="{{!submitting}}">ğŸ‰ ç”Ÿæˆç¥ç¦å¡ç‰‡</text>
        <text wx:else>ç”Ÿæˆä¸­...</text>
      </button>
    </view>

    <!-- å¡ç‰‡é¢„è§ˆ -->
    <view class="card">
      <text class="section-title">ğŸ‘ï¸ å¡ç‰‡é¢„è§ˆ</text>

      <view class="greeting-card-preview" style="background: {{selectedTemplateGradient}}">
        <view class="preview-decoration">{{selectedTemplateEmoji}}</view>

        <view class="preview-content">
          <view class="preview-header">
            <text class="preview-badge">é©¬å¹´æ–°æ˜¥</text>
          </view>

          <view class="preview-message">
            {{displayMessage}}
          </view>

          <view class="preview-footer">
            <view class="preview-from">
              <text class="label">æ¥è‡ªï¼š</text>
              <text class="value">{{form.senderName || 'åŒ¿å'}}</text>
            </view>
            <view class="preview-to">
              <text class="label">è‡´ï¼š</text>
              <text class="value">{{form.recipientName || 'æ‰€æœ‰äºº'}}</text>
            </view>
          </view>

          <view class="preview-date">
            {{currentDate}}
          </view>
        </view>
      </view>
    </view>
  </view>
</view>
